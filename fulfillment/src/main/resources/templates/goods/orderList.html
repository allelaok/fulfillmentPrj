<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <style>
        
        .sidebar {
            height: 100vh;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #f8f9fa;
            padding-top: 20px;
        }
        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 18px;
            color: #333;
            display: block;
        }
        .sidebar a:hover {
            background-color: #ddd;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <!-- Sidebar -->
    <div class="sidebar">
        <a th:href="@{/home}">대시보드</a>
        <a th:href="@{/goods/list}">상품 관리</a>
        <a th:href="@{/orders/list}">주문 관리</a>
        <a th:href="@{/stock/list}">재고 관리</a>
        <a th:href="@{/stock/history}">입출고 내역</a>
    </div>
    <div class="container">
    	<!-- 검색 창 -->
	    <div class="row mt-4">
	        <div class="col-md-12">
	            <h2>상품명 검색</h2>
	            <div class="input-group">
	                <input type="text" class="form-control" id="searchInput" placeholder="상품명을 입력하세요">
	                <div class="input-group-append">
	                    <button class="btn btn-primary" type="button">검색</button>
	                </div>
	            </div>
	        </div>
	    </div>
        <div class="row">
            <div class="col-md-4">
                <h2>주문 리스트</h2>
                <ul class="list-group">
                    <!-- Thymeleaf 반복문을 이용하여 주문 리스트 표시 -->
                    <table>
						<tr>
							<th>주문상태</th>
							<th>주문번호</th>
							<th>상품명</th>
							<th>주문일</th>
						</tr>
						<tr th:each="order : ${orders}">
							<td th:text="${order.status}"></td>
							<td th:text="${order.orderId}"></td>
							<td><a th:text="${goodsService.getGoodsById(order.goodsId).name}" th:onclick="'javascript:showDetails(' + ${order.no} + ', ' + ${order.status} + ')'" style="cursor: pointer;"></a></td>
							<td th:text="${order.orderDate}"></td>
						</tr>
					</table>
                </ul>
            </div>
            <div class="col-md-8">
                <h2>상세 정보</h2>
                <div id="orderDetails">
                    <!-- 선택된 주문의 상세 정보는 여기에 표시됩니다 -->
                </div>
            </div>
        </div>
    </div>
<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <!-- 주문 상세 정보를 불러오는 JavaScript 함수 정의 -->
    <script th:inline="javascript">
        
        function showDetails(no, status) {
        	var url;

	        // status 값에 따라 요청할 URL과 데이터를 표시할 요소를 결정합니다.
	        if (status === 1 || status === 2) {
	            url = "/orderDetails?no=" + no;
	        } else if (status === 3 || status === 4) {
	            url = "/exchangeDetails?no=" + no;
	        } else {
	            url = "/refundDetails?no=" + no;
	        }
	
	        // AJAX 요청을 보냅니다.
	        $.get(url, function(data) {
	            $('#orderDetails').html(data);
	        });
	    }
    </script>


</body>
</html>
